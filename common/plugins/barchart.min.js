function barchart(i,f,C,d,c,t,s,e,b){var l=(s)?s:{top:10,bottom:20,left:30,right:10};var f=f,C=C,d=d,c=c,t=t,e=e;var v=b;var q,o,j,h,g,a,n,F=[],k;if(c==null){c=[0,o]}else{if(typeof c=="number"){c=[0,c]}}var r=true;function p(m,x){r=true;q=m-l.left-l.right;o=x-l.top-l.bottom;j=d3.scale.ordinal().rangeRoundBands([0,q],0.1);h=d3.scale.linear().range([o,0]);g=d3.svg.axis().scale(j).orient("bottom");a=d3.svg.axis().scale(h).orient("left").ticks(10)}function E(){d3.select(i).select("svg").remove();n=d3.select(i).append("svg").attr("width",q+l.left+l.right).attr("height",o+l.top+l.bottom).append("g").attr("class","barchart").attr("transform","translate("+l.left+","+l.top+")")}function u(){var x,m;j.domain((d)?d:[0,q]);h.domain([c[0],c[1]]);x=c[0],m=c[1];k=(x>=0)?o:(m/(m-x))*o}function B(){var x=n.selectAll(".bar").data(F);x.enter().append("g").attr("class","bar").attr("transform",function(G,y){return"translate("+j(G.x)+",0)"}).append("rect").attr("width",j.rangeBand()).attr("fill",function(G,y){return(e)?e[y]:"steelblue"}).attr("y",function(y){return(y.y>=0)?h(y.y):h(0)}).attr("height",function(y){return(y.y>=0)?k-h(y.y):k-h(-y.y)});x.select("rect").transition().attr("y",function(y){return(y.y>=0)?h(y.y):h(0)}).attr("height",function(y){return(y.y>=0)?k-h(y.y):k-h(-y.y)});if(r){r=false;n.append("g").attr("class","x axis").attr("transform","translate(0,"+k+")").call(g);var m=n.append("g").attr("class","y axis").call(a);if(t){m.append("text").attr("transform","rotate(-90)").attr("y",6).attr("dy",".71em").style("text-anchor","end").text(t)}if(v){n.append("text").attr("transform","translate(10,-20)").text(v)}}}function A(){F=[]}function z(m,x){p(m,x);u();B()}function D(m){F=m;B()}function w(m){if(m){F=m}else{A()}p(f,C);E();u();if(m){B()}}w();return{render:D,reset:w}};