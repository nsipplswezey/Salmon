function agentviewer(A,h,J,E,B,e,c,i,F){var a=h,d=J,G=E,K=B,m=e;var t=(c)?c:20;var k=G*K,D=G*m;var H=[],w=new Object();var f,g,q=15;var o=(i)?i:false;var l=F;function s(){d3.select(A).select("svg").remove();f=d3.select(A).append("svg").attr("width",a).attr("height",d).append("g").attr("class","g_main_agent").attr("transform","translate(0, 0)");var u=f.append("svg:defs");u.append("svg:clipPath").attr("id","crect").append("svg:rect").attr("x",0).attr("y",0).attr("width",a).attr("height",d);var L=f.append("rect").attr("class","click-capture").attr("x",0).attr("y",0).attr("width",a).attr("height",d);if(l){L.style("fill",l)}}function z(u,O,M,N,L){H.push({x:u,y:O,r:M,id:N,color:L})}function v(){H=[];w=new Object()}function y(Q){var M=[];var L=[];for(var O in Q){if(Q[O].wrapped){L.push(Q[O])}else{M.push(Q[O])}}if(o){var u=f.selectAll("image").data(Q);u.exit().remove();var P=f.selectAll("image").data(M);P.enter().append("image").attr("id",function(R){return"A"+R.id}).attr("clip-path","url(#crect)").attr("transform",function(R){return"translate("+(G*R.cx-R.image.size[0]/2)+","+(G*R.cy-R.image.size[1]/2)+")"}).attr("xlink:href",function(R){return R.image.src}).attr("x",0).attr("y",0).attr("height",function(R){return R.image.size[1]}).attr("width",function(R){return R.image.size[0]});P.attr("xlink:href",function(R){return R.image.src}).attr("height",function(R){return R.image.size[1]}).attr("width",function(R){return R.image.size[0]});P.transition().duration(t).attr("transform",function(R){return"translate("+(G*R.cx-R.image.size[0]/2)+","+(G*R.cy-R.image.size[1]/2)+")"});var N=f.selectAll("image").data(L);N.attr("transform",function(R){return"translate("+(G*R.cx-R.image.size[0]/2)+","+(G*R.cy-R.image.size[1]/2)+")"}).attr("xlink:href",function(R){return R.image.src}).attr("height",function(R){return R.image.size[1]}).attr("width",function(R){return R.image.size[0]})}else{var u=f.selectAll("circle").data(Q);u.exit().remove();var P=f.selectAll("circle").data(M);P.enter().append("circle").attr("clip-path","url(#crect)").attr("id",function(R){return"A"+R.id}).attr("cx",function(R){return G*R.cx}).attr("cy",function(R){return G*R.cy}).attr("r",function(R){return(R.r)?R.r:q}).attr("fill",function(R){return R.col});P.attr("r",function(R){return(R.r)?R.r:q}).attr("fill",function(R){return R.col});P.transition().duration(t).attr("cx",function(R){return I(G*R.cx,D)}).attr("cy",function(R){return I(G*R.cy,k)});var N=f.selectAll("circle").data(L,function(R){return R.id});N.attr("cx",function(R){return I(G*R.cx,D)}).attr("cy",function(R){return I(G*R.cy,k)}).attr("r",function(R){return R.r}).style("fill",function(R){return R.col})}}function n(u,L){a=u;d=L;s();y(H)}function b(M){for(var u in M){var L=M[u];var N={id:L.id,cx:L.cx,cy:L.cy,r:(L.r)?L.r:5+15*Math.random(),col:(L.col)?L.col:r(),wrapped:false};if(L.image){N.image=L.image}H.push(N);w[L.id]=N}y(H)}function r(){var u="#";for(var L=0;L<3;L++){u=u+Math.floor(16*Math.random()).toString(16)}return u}function I(L,u){return(L+u)%u}function j(u){if(u.length>0){b(u)}}function p(L){if(L.length==0){return}for(var u in L){delete w[L[u]]}H=new Array();for(var M in w){H.push(w[M])}}function C(u){v();s();if(u.length>0){b(u)}}function x(P){var N=[];for(var L in P){var O=P[L];var Q=w[O.id];if(!Q){continue}var M=Object.keys(O);for(var u in M){Q[M[u]]=O[M[u]]}}y(H)}C([]);return{render:x,reset:C,create:j,kill:p}};